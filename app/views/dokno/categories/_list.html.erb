<% if Dokno::Category.exists? %>
  <section class="mb-10">
    <select name="category_id" id="category_id" size="1" class="rounded text-xl border p-2 w-full max-w-full" onchange="location.href='<%= categories_path %>/' + this.value;">
      <option>Select a category</option>
      <%= Dokno::Category.select_option_markup(selected_category_ids: [@category&.id.to_i]).html_safe %>
    </select>
  </section>
<% end %>

<% if @articles.blank? %>
  <section class="border-t border-gray-300 py-10 text-xl">
    <% if Dokno::Category.exists? %>
      <% if @category.present? %>
        No articles found in this category
      <% else %>
        No uncategorized articles
      <% end %>
    <% else %>
      <a href="<%= new_category_path(@category&.id) %>">Add your first category</a>
    <% end %>
  </section>
<% else %>
  <% @articles.each_with_index do |article, i| %>
    <section class="border-t border-gray-300 py-10 text-xl flex items-center">
      <div class="w-1/3">
        <a href="<%= article_path article.id %>"><%= article.title %></a>
      </div>
      <div class="w-2/3">
        <%= article.summary.presence || 'No summary provided' %>
      </div>
    </section>
  <% end %>
<% end %>

<hr />

<section class="mt-10">
  <% if @category.present? %>
    <button class="bg-gray-700 text-gray-100 hover:text-white rounded mr-3 py-1 px-3 font-semibold text-sm" onclick="location.href='<%= edit_category_path(@category) %>';">EDIT CATEGORY</button>
  <% end %>
  <button class="bg-gray-700 text-gray-300 hover:text-white rounded mr-3 py-1 px-3 font-semibold text-sm" onclick="location.href='<%= new_category_path %>/?parent_category_id=<%= @category&.id %>';">ADD CATEGORY</button>
  <button class="bg-blue-700 text-gray-300 hover:text-white rounded mr-3 py-1 px-3 font-semibold text-sm" onclick="location.href='<%= new_article_path %>/?category_id=<%= @category&.id %>';">ADD ARTICLE</button>
</section>
